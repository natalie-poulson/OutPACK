{% extends 'final_app/base_layout.html' %}


{% block content %}
<div class = "profile">
    <div class = "profile-aside">
        <a href = "{% url 'final_app:profile_edit' %}">edit </a>
        <div class = "profile-picture">
            <img src="{{ user.profile.profile_picture.url }}" width="auto" height="250px" alt="">
        </div>
        <div class = "profile-info">
            <p> {{ user.profile.name }}</p>

            {% if user.profile.current_city %}
                <p> {{ user.profile.current_city }}</p>
            {% endif %}
            
            {% if user.profile.bio %}
                <p><strong>Bio:</strong> {{ user.profile.bio }}</p>
            {% endif %}
        
            <p><strong>Date Joined:</strong> {{ user.profile.created_at }}</p>
        </div>
    </div>
    <div class='profile-main'>
        <div id='profileMap' style='width: 56vw; height: 40vh;border-radius:15px'>  </div>
            <script>
                    mapboxgl.accessToken = 'pk.eyJ1IjoibmF0YWxpZXBsc24iLCJhIjoiY2psZm8ybnFnMHl4NDNwcG16eGFmMTdwaCJ9.2xYdBHCpcf5cdap8BvhVgQ';
                    var profileMap = new mapboxgl.Map({
                        container: 'profileMap',
                        style: 'mapbox://styles/mapbox/outdoors-v9',
                        center: [-119.538330, 37.865101],
                        zoom: 6
                    });
            </script>
       
            {% if trips %}
            <div class='profileTrips'>
                <h1> Trips</h1>
            {% endif %}

                {% for trip in trips %}
                    {% if trip.completed %}
                        <li><i class="fas fa-calendar-check"></i> &nbsp; <a href={% url 'final_app:trip_detail' slug=trip.slug %} >{{trip.trail}}</a><span class='trip-date-line'> &nbsp; {{trip.start_date}} - {{trip.end_date}}</span></li>
                    {% else %}
                        <li><a href={% url 'final_app:trip_detail' slug=trip.slug %} >{{trip.trail}}</a> <span class='trip-date-line'>&nbsp;{{trip.start_date}} - {{trip.end_date}}</span></li>
                    {% endif %}
                {% endfor %} 
                
        </div>
        <div class ="profile-post">
            {% for trip in trips %}
                {% for trip_post in trip.trip_posts.all %}
                    {% if trip_post.image %}
                        <a href={% url 'final_app:post_detail' slug=trip_post.slug %} ><img id ="hover-img" src="{{ trip_post.image.url }}" width="150px" height="150px" alt=""></a>
                    {% endif %}
                    {% if trip_post.video %}
                    <a href={% url 'final_app:post_detail' slug=trip_post.slug %} ><video id ="hover-img" src="{{ trip_post.video.url }}" width="150px" height="150px" alt=""></a>
                    {% endif %}
                {% endfor %}
            {% endfor %} 
        </div>
    </div>
</div>   
{% endblock %}


